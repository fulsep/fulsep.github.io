"use strict";(self.webpackChunkdocusaurus_blog=self.webpackChunkdocusaurus_blog||[]).push([[256],{2323:(a,e,n)=>{n.r(e),n.d(e,{assets:()=>p,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>m,toc:()=>s});var t=n(7462),l=(n(7294),n(3905)),o=n(8607);n(9960);const i={slug:"upload-file-dengan-reactjs-dan-axios",title:"Upload file dengan ReactJS dan axios",authors:["irul"],tags:["Frontend Development","Beginner Frontend","ReactJS"],date:"2021-05-07T11:00"},r=void 0,m={permalink:"/upload-file-dengan-reactjs-dan-axios",source:"@site/blog/2023-01-21-003-upload-file-dengan-reactjs-dan-axios.mdx",title:"Upload file dengan ReactJS dan axios",description:"",date:"2021-05-07T11:00:00.000Z",formattedDate:"7 Mei 2021",tags:[{label:"Frontend Development",permalink:"/tags/frontend-development"},{label:"Beginner Frontend",permalink:"/tags/beginner-frontend"},{label:"ReactJS",permalink:"/tags/react-js"}],readingTime:4.965,hasTruncateMarker:!0,authors:[{name:"Irul",title:"JavaScript Enthusiast",url:"https://github.com/fulsep",imageURL:"https://github.com/fulsep.png",key:"irul"}],frontMatter:{slug:"upload-file-dengan-reactjs-dan-axios",title:"Upload file dengan ReactJS dan axios",authors:["irul"],tags:["Frontend Development","Beginner Frontend","ReactJS"],date:"2021-05-07T11:00"},prevItem:{title:"Terlalu Banyak State? Atasi Dengan Ini!",permalink:"/terlalu-banyak-state-atasi-dengan-ini"},nextItem:{title:"React Lifecycle: Class Component vs Functional Component",permalink:"/perbedaan-lifecycle-react-pada-class-component-dan-functional-component"}},p={authorsImageUrls:[void 0]},s=[{value:"Langkah-langkah",id:"langkah-langkah",level:2},{value:"Penggunaan pada ReactJS input component",id:"penggunaan-pada-reactjs-input-component",level:2},{value:"Upload setelah memilih file",id:"upload-setelah-memilih-file",level:3},{value:"Upload setelah menekan tombol",id:"upload-setelah-menekan-tombol",level:3},{value:"Mengirimkan data lain bersamaan dengan file upload",id:"mengirimkan-data-lain-bersamaan-dengan-file-upload",level:2}],d={toc:s};function u(a){let{components:e,...n}=a;return(0,l.kt)("wrapper",(0,t.Z)({},d,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)(o.Z,{src:"/img/blog/upload.png",alt:"upload",mdxType:"ImageCenterize"}),(0,l.kt)("p",null,"Pada dasarnya, upload file adalah sebuah aksi mengirimkan data dan biasanya menggunakan method POST/PATCH/PUT sesuai dengan kebutuhan. Pada tulisan kali ini kita akan membahas lebih jauh tentang bagaimana caranya mengimplementasi upload dengan axios dengan library ReactJS."),(0,l.kt)("h2",{id:"langkah-langkah"},"Langkah-langkah"),(0,l.kt)("p",null,"Untuk mengimplementasikan axios post dengan multipart form data dari input tipe file di ReactJS, kita dapat mengikuti langkah-langkah berikut:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Instal axios: Kita dapat menginstal axios dengan perintah npm atau yarn")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"npm i axios\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"yarn add axios\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"Import axios: Pada file JavaScript kita, import axios dengan perintah")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"import axios from 'axios';\n")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"Tambahkan event listener pada input file: Tambahkan event listener pada input file yang digunakan untuk menangkap file yang dipilih oleh pengguna."),(0,l.kt)("li",{parentName:"ol"},"Buat fungsi untuk mengirim data: Buat fungsi yang akan digunakan untuk mengirim data ke server. Dalam fungsi tersebut, kita dapat menggunakan axios post dengan mengirimkan file yang dipilih oleh pengguna dalam format multipart form data. ")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append("file", file);\n    try {\n      const response = await axios.post("URL", formData, {\n        headers: {\n          "Content-Type": "multipart/form-data",\n        },\n      });\n      console.log(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n')),(0,l.kt)("h2",{id:"penggunaan-pada-reactjs-input-component"},"Penggunaan pada ReactJS input component"),(0,l.kt)("h3",{id:"upload-setelah-memilih-file"},"Upload setelah memilih file"),(0,l.kt)("p",null,"Untuk memanggil fungsi handleSubmit yang dibuat di ReactJS input file, kita dapat menambahkan event listener pada elemen input file, seperti ini:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Tambahkan atribut onChange pada elemen input file:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'<input type="file" onChange={handleSubmit}/>\n')),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"Pada event listener onChange, kita dapat mengambil file yang dipilih oleh pengguna dan menyimpannya dalam state, seperti ini:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const handleSubmit = (event) => {\n    setFile(event.target.files[0]); // menyimpan file yang dipilih oleh pengguna dalam state\n    event.preventDefault(); // mencegah event default dari input file\n    // kode untuk mengirim data ke server menggunakan axios\n  };\n")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"Pada saat user meng-upload file, fungsi handleSubmit akan dijalankan dan mengirim data ke server dengan axios post")),(0,l.kt)("p",null,"Berikut kode lengkapnya:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'import React, { useState } from "react";\nimport axios from "axios";\n\nconst FileUpload = () => {\n  const [file, setFile] = useState(null);\n\n  const handleChange = async (event) => {\n    setFile(event.target.files[0]);\n    const formData = new FormData();\n    formData.append("file", file);\n    try {\n      const response = await axios.post("URL", formData, {\n        headers: {\n          "Content-Type": "multipart/form-data",\n        },\n      });\n      console.log(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return <input type="file" onChange={handleChange} />;\n};\n\nexport default FileUpload;\n')),(0,l.kt)("h3",{id:"upload-setelah-menekan-tombol"},"Upload setelah menekan tombol"),(0,l.kt)("p",null,"Untuk memanggil fungsi handleSubmit dengan menggunakan tombol submit di ReactJS component input file, kita dapat menambahkan event listener pada elemen tombol submit, seperti ini:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Tambahkan elemen tombol submit di component input file:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<form onSubmit={handleSubmit}>\n    <input type="file" onChange={(e) => setFile(e.target.files[0])}/>\n    <button type="submit">Upload</button>\n</form>\n')),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"Pada event listener onSubmit yang ditambahkan pada elemen form, kita dapat mengambil file yang dipilih oleh pengguna dari state dan mengirimkannya ke server menggunakan axios post:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const handleSubmit = async (event) => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append("file", file);\n    try {\n      const response = await axios.post("URL", formData, {\n        headers: {\n          "Content-Type": "multipart/form-data",\n        },\n      });\n      console.log(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n')),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"Pada saat user mengklik tombol submit, fungsi handleSubmit akan dijalankan dan mengirim data ke server dengan axios post.")),(0,l.kt)("p",null,"Berikut kode lengkapnya:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'import React, { useState } from "react";\nimport axios from "axios";\n\nconst FileUpload = () => {\n  const [file, setFile] = useState(null);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append("file", file);\n    try {\n      const response = await axios.post("URL", formData, {\n        headers: {\n          "Content-Type": "multipart/form-data",\n        },\n      });\n      console.log(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input type="file" onChange={(e) => setFile(e.target.files[0])} />\n      <button type="submit">Upload</button>\n    </form>\n  );\n};\n\nexport default FileUpload;\n')),(0,l.kt)("h2",{id:"mengirimkan-data-lain-bersamaan-dengan-file-upload"},"Mengirimkan data lain bersamaan dengan file upload"),(0,l.kt)("p",null,"Untuk mengirim data lain seperti nama, tanggal lahir, dan nomor telepon bersamaan dengan file dalam satu kali post request menggunakan axios, kita dapat menambahkan data tersebut ke dalam objek FormData sebelum dikirim ke server."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Tambahkan data lain ke dalam objek FormData: Kita dapat menambahkan data lain seperti nama, tanggal lahir, dan nomor telepon ke dalam objek FormData sebelum menambahkan file ke dalam objek tersebut.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const formData = new FormData();\nformData.append("file", file);\nformData.append("nama", nama);\nformData.append("tanggalLahir", tanggalLahir);\nformData.append("nomorTelepon", nomorTelepon);\n')),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"Tambahkan data lain yang diperlukan pada form: Kita dapat menambahkan input yang sesuai dengan data yang diperlukan pada form.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'<form onSubmit={handleSubmit}>\n    <input type="file" onChange={(e) => setFile(e.target.files[0])}/>\n    <input type="text" placeholder="Nama" onChange={(e) => setNama(e.target.value)}/>\n    <input type="text" placeholder="Tanggal Lahir" onChange={(e) => setTanggalLahir(e.target.value)}/>\n    <input type="text" placeholder="Nomor Telepon" onChange={(e) => setNomorTelepon(e.target.value)}/>\n    <button type="submit">Upload</button>\n</form>\n')),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"Kirim data lain beserta file menggunakan axios post: Kita dapat mengirim data lain beserta file menggunakan axios post dengan mengirimkan objek FormData yang sudah diisi dengan data lain dan file.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const handleSubmit = async (event) => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append("file", file);\n    formData.append("nama", nama);\n    formData.append("tanggalLahir", tanggalLahir);\n    formData.append("nomorTelepon", nomorTelepon);\n    try {\n      const response = await axios.post("URL", formData, {\n        headers: {\n          "Content-Type": "multipart/form-data",\n        },\n      });\n      console.log(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n')),(0,l.kt)("p",null,"Berikut kode lengkapnya:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'import React, { useState } from "react";\nimport axios from "axios";\n\nconst FileUpload = () => {\n  const [file, setFile] = useState(null);\n  const [nama, setNama] = useState("");\n  const [tanggalLahir, setTanggalLahir] = useState("");\n  const [nomorTelepon, setNomorTelepon] = useState("");\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append("file", file);\n    formData.append("nama", nama);\n    formData.append("tanggalLahir", tanggalLahir);\n    formData.append("nomorTelepon", nomorTelepon);\n    try {\n      const response = await axios.post("URL", formData, {\n        headers: {\n          "Content-Type": "multipart/form-data",\n        },\n      });\n      console.log(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input type="file" onChange={(e) => setFile(e.target.files[0])} />\n      <input\n        type="text"\n        placeholder="Nama"\n        onChange={(e) => setNama(e.target.value)}\n      />\n      <input\n        type="text"\n        placeholder="Tanggal Lahir"\n        onChange={(e) => setTanggalLahir(e.target.value)}\n      />\n      <input\n        type="text"\n        placeholder="Nomor Telepon"\n        onChange={(e) => setNomorTelepon(e.target.value)}\n      />\n      <button type="submit">Upload</button>\n    </form>\n  );\n};\n\nexport default FileUpload;\n')),(0,l.kt)("p",null,"Yang paling penting adalah pastikan server kita dapat menerima dan menangani data yang dikirim dalam format multipart form data, jika menggunakan ExpressJS kita dapat menggunakan package multer untuk memprosesnya."),(0,l.kt)("p",null,"Semoga Bermanfaat!"))}u.isMDXComponent=!0}}]);